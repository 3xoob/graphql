{"version":3,"file":"loginPage.js","sourceRoot":"","sources":["../../src/app/loginPage.ts"],"names":[],"mappings":"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","sourcesContent":["import { renderProfilePage } from './profilePage';\n\n// Function to handle login authentication\nexport async function authenticateUser(username: any, password: any) {\n    const credentials = `${username}:${password}`;\n    const encodedCredentials = btoa(credentials);\n    try {\n        const response = await fetch(\"https://learn.reboot01.com/api/auth/signin\", {\n            method: \"POST\",\n            headers: {\n                Authorization: `Basic ${encodedCredentials}`,\n                \"Content-Type\": \"application/json\",\n            },\n        });\n        if (response.ok) {\n            console.log(response)\n            const token = await response.text();\n            console.log(token)\n            if (token) {\n                const cleanToken = token.replace(/^\"(.*)\"$/, \"$1\");\n                localStorage.setItem(\"jwt\", cleanToken);\n                return null;\n            } else {\n                return \"Login successful, but no token received.\";\n            }\n        } else {\n            const errorText = await response.text();\n            return errorText;\n        }\n    } catch (error) {\n        console.error(\"Error during login:\", error);\n        return \"An error occurred. Please try again.\";\n    }\n}\n\n// Function to Render login page\nexport function renderLoginPage() {\n    const app = document.getElementById(\"app\");\n\n    if (!app) {\n        console.error(\"App container not found!\");\n        return;\n    }\n\n    app.innerHTML = '';\n\n    const LoginPage = document.createElement(\"div\");\n    LoginPage.className = \"LoginPage\";\n\n    const ring = document.createElement(\"div\");\n    ring.className = \"ring\";\n\n    const i1 = document.createElement(\"i\");\n    i1.style.setProperty(\"--clr\", \"#4070f4\");\n    const i2 = document.createElement(\"i\");\n    i2.style.setProperty(\"--clr\", \"#30a091\");\n    const i3 = document.createElement(\"i\");\n    i3.style.setProperty(\"--clr\", \"#a8438f\");\n\n    const login = document.createElement(\"div\");\n    login.className = \"login\";\n\n    const loginHeading = document.createElement(\"h2\");\n    loginHeading.textContent = \"Login\";\n\n    const form = document.createElement(\"form\");\n    form.action = \"#\";\n    form.method = \"POST\";\n\n    const inputBx1 = document.createElement(\"div\");\n    inputBx1.className = \"inputBx\";\n    const usernameInput = document.createElement(\"input\");\n    usernameInput.type = \"text\";\n    usernameInput.name = \"username\";\n    usernameInput.placeholder = \"Username | Email\";\n    inputBx1.appendChild(usernameInput);\n\n    const inputBx2 = document.createElement(\"div\");\n    inputBx2.className = \"inputBx\";\n    const passwordInput = document.createElement(\"input\");\n    passwordInput.type = \"password\";\n    passwordInput.name = \"password\";\n    passwordInput.placeholder = \"Password\";\n    inputBx2.appendChild(passwordInput);\n\n    const inputBx3 = document.createElement(\"div\");\n    inputBx3.className = \"inputBx\";\n    const submitInput = document.createElement(\"input\");\n    submitInput.type = \"submit\";\n    submitInput.value = \"Login\";\n    inputBx3.appendChild(submitInput);\n\n    const ErrorOutput = document.createElement(\"div\");\n    ErrorOutput.className = \"ErrorOutput\";\n    const Errmsg = document.createElement(\"span\");\n    Errmsg.id = \"Errmsg\"\n    Errmsg.textContent = \"\";\n    ErrorOutput.appendChild(Errmsg);\n\n    form.append(inputBx1, inputBx2, inputBx3, ErrorOutput);\n\n    login.append(loginHeading, form);\n\n    ring.append(i1, i2, i3, login);\n\n    LoginPage.append(ring)\n\n    app.append(LoginPage);\n\n    form.addEventListener(\"submit\", async (event) => {\n        event.preventDefault();\n\n        const username = usernameInput.value;\n        const password = passwordInput.value;\n\n        const loginError = await authenticateUser(username, password);\n\n        if (loginError) {\n            try {\n                const errorMessage = JSON.parse(loginError).error;\n                Errmsg.textContent = errorMessage;\n            } catch (e) {\n                console.error(\"Error parsing login error:\", e);\n                Errmsg.textContent = \"An unexpected error occurred.\";\n            }\n        } else {\n            history.pushState(null, \"\", \"/profile\");\n            renderProfilePage();\n        }\n    });\n}\n"]}